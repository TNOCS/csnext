<div
    v-if="layers && layers.length>0"
    id="layer-legend-control"
    class="mapboxgl-ctrl mapboxgl-ctrl-group map-component-widget map-component-widget"
>
    <div class="map-component-title">{{$cs.Translate('LEGEND')}}</div>

    <v-menu open-on-hover top offset-y>
        <template v-slot:activator="{ on }">
            <div v-on="on" class="map-legend-layer-title">{{ activeLayer.title }}</div>
        </template>
        <v-list v-if="layers.length>1">
            <v-list-item
                v-for="(layer, index) in layers"
                :key="index"
                @click="selectLayer(layer)"
            >
                <v-list-item-title>{{ layer.title }}</v-list-item-title>
            </v-list-item>
        </v-list>
    </v-menu>
    

    <div v-for="layer in layers">
        {{ layer.id }}
        <div v-for="legend in layer._legends" v-if="legend.propertyInfo">
                {{ legend.propertyInfo.title }}            
            <div v-if="legend.stops" v-for="stop in legend.stops">
                <v-layout
                    ><span
                        class="map-legend-color-rectangle"
                        :style="getStopColor(stop, legend)"
                    ></span>
                    <span class="map-legend-color-text"
                        >{{ stop[0] }}</span
                    ></v-layout
                >
            </div>
        </div>
    </div>
</div>
