<div>
    <v-toolbar flat color="white">
        <v-btn outlined class="mr-4" @click="setToday">
            Today
        </v-btn>
        <v-btn fab text small @click="prev">
            <v-icon small>chevron_left</v-icon>
        </v-btn>
        <v-btn fab text small @click="next">
            <v-icon small>chevron_right</v-icon>
        </v-btn>
        <v-toolbar-title>{{ title() }}</v-toolbar-title>
        <div class="flex-grow-1"></div>
        <v-menu bottom right>
            <template v-slot:activator="{ on }">
                <v-btn outlined v-on="on">
                    <span>{{ typeToLabel[type] }}</span>
                    <v-icon right>menu-down</v-icon>
                </v-btn>
            </template>
            <v-list>
                <v-list-item @click="type = 'day'">
                    <v-list-item-title>Day</v-list-item-title>
                </v-list-item>
                <v-list-item @click="type = 'week'">
                    <v-list-item-title>Week</v-list-item-title>
                </v-list-item>
                <v-list-item @click="type = 'month'">
                    <v-list-item-title>Month</v-list-item-title>
                </v-list-item>
                <v-list-item @click="type = '4day'">
                    <v-list-item-title>4 days</v-list-item-title>
                </v-list-item>
            </v-list>
        </v-menu>
    </v-toolbar>

    <v-calendar
        ref="calendar"
        v-model="focus"
        color="primary"
        style="height: calc(100% - 80px)"
        :events="getEvents()"
        :event-color="getEventColor"
        :event-margin-bottom="3"
        :now="today"
        :type="type"
        @click:event="showEvent"
        @click:more="viewDay"
        @click:date="viewDay"
        @change="updateRange"
    ></v-calendar>

    <v-menu
        v-model="selectedOpen"
        :close-on-content-click="false"
        :activator="selectedElement"
        full-width
        offset-x
    >
        <v-card color="grey lighten-4" min-width="350px" flat>
            <v-toolbar :color="selectedEvent.color" dark>
                <v-btn icon>
                    <v-icon>mdi-pencil</v-icon>
                </v-btn>
                <v-toolbar-title v-html="selectedEvent.name"></v-toolbar-title>
                <div class="flex-grow-1"></div>
                <v-btn icon>
                    <v-icon>mdi-heart</v-icon>
                </v-btn>
                <v-btn icon>
                    <v-icon>mdi-dots-vertical</v-icon>
                </v-btn>
            </v-toolbar>
            <v-card-text>
                <span v-html="selectedEvent.details"></span>
            </v-card-text>
            <v-card-actions>
                <v-btn text color="secondary" @click="selectedOpen = false">
                    Cancel
                </v-btn>
            </v-card-actions>
        </v-card>
    </v-menu>
</div>
