<div v-if="field">
        <template v-if="field.type === 'button-trigger'">
            <v-btn icon @click="triggerClick(field)"><v-icon>{{field.icon}}</v-icon></v-btn>  
        </template>
        <template v-if="field.type === 'datetimepicker'">
            <v-datetime-picker :required="field.required" :label="$cs.Translate(field.title)"
                v-model="target[field._key]" @change="fieldUpdated(field)"></v-datetime-picker>   
        </template>
        <template v-if="field.type === 'boolean'">
            <v-checkbox
                v-model="target[field._key]"
                :label="$cs.Translate(field.title)"
                :required="field.required"
                :disabled="field.readonly"
                @change="fieldUpdated(field)"
            ></v-checkbox>
        </template>
        <template v-if="field.type === 'selection'">
            <v-select
                :items="field.options"
                v-model="target[field._key]"
                :label="$cs.Translate(field.title)"
                :disabled="field.readonly"
                @change="fieldUpdated(field)"
            ></v-select>
        </template>
        <template v-if="field.type === 'combobox'">
                <v-combobox
                    :items="fieldOptions(field)"
                    v-model="target[field._key]"
                    :label="$cs.Translate(field.title)"                    
                    :disabled="field.readonly"     
                    @change="fieldUpdated(field)"              
                ></v-combobox>
                
                <!-- item-text="text" 
                    
                item-value="value"  -->
            </template>
            <template v-if="field.type === 'combobox-objects'">
                    <v-combobox
                        :items="fieldOptions(field)"
                        v-model="target[field._key]"
                        :label="$cs.Translate(field.title)"                    
                        :disabled="field.readonly"     
                        :return-object="false"
                        @change="fieldUpdated(field)"              
                    ></v-combobox>
                    
                    <!-- item-text="text" 
                        
                    item-value="value"  -->
                </template>
        <template v-if="field.type === 'string'">
            <v-text-field
                v-if="field._key"
                v-model="target[field._key]"
                :label="$cs.Translate(field.title)"
                :required="field.required"
                :rules="field.required ? [rules.required] : []"
                :disabled="field.readonly"
                @change="fieldUpdated(field)"
            ></v-text-field>
            <v-text-field
                v-if="field._index"
                v-model="target[field._index]"
                :label="$cs.Translate(field.title)"
                :required="field.required"
                :disabled="field.readonly"
                @change="fieldUpdated(field)"
            ></v-text-field>
        </template>
        <template v-if="field.type === 'textarea'">
            <v-textarea
                v-if="field._key"
                v-model="target[field._key]"
                :label="$cs.Translate(field.title)"
                :required="field.required"
                :disabled="field.readonly"
                @change="fieldUpdated(field)"
                auto-grow
                rows="2"
            ></v-textarea>
            <v-textarea
                v-if="field._index"
                v-model="target[field._index]"
                :label="$cs.Translate(field.title)"
                :required="field.required"
                :disabled="field.readonly"
                @change="fieldUpdated(field)"
            ></v-textarea>
        </template>
        <template v-if="field.type === 'slider'">
            <v-slider
                enabled
                v-model="target[field._key]"
                :min="field.min"
                :step="field.step"
                :max="field.max"
                :disabled="field.readonly"
                @change="fieldUpdated(field)"
            ></v-slider>
        </template>
        <template v-if="field.type === 'checkbox'">
            <v-checkbox
                :label="$cs.Translate(field.title)"
                v-model="target[field._key]"
                :disabled="field.readonly"
                @change="fieldUpdated(field)"
            ></v-checkbox>
        </template>
        <template v-if="field.type === 'checkboxes-horizontal'">
            {{ $cs.Translate(field.title) }}
            <v-layout>
                <v-checkbox
                    v-for="option in field.options"
                    :key="option"
                    :label="option"
                    :value="option"
                    @change="fieldUpdated(field)"
                    :disabled="field.readonly"
                    v-model="target[field._key]"
                ></v-checkbox>
            </v-layout>
        </template>
        <template v-if="field.type === 'number'">
            <v-text-field
                v-if="field._key"
                v-model.number="target[field._key]"
                type="number"
                :rules="[rules.valueMin, rules.valueMax, rules.required]"
                :label="$cs.Translate(field.title)"
                :required="field.required"
                :disabled="field.readonly"
                @change="fieldUpdated(field)"
            ></v-text-field>
            <v-text-field
                v-if="field._index>=0"
                v-model.number="target[field._index]"
                type="number"
                :label="$cs.Translate(field.title)"
                :required="field.required"
                :disabled="field.readonly"
                @change="fieldUpdated(field)"
            ></v-text-field>
        </template>
        <template v-if="field.type === 'array'">
            <template v-for="item in target[field._key]">
                <cs-form :data="item" :formdef.sync="field.arrayType"></cs-form>
            </template>
        </template>
        <template v-if="field.type === 'keyvalue'">
                <template v-for="(item,index) in target[field._key]">
                    <cs-form :data="target[item]" :formdef.sync="field.arrayType"></cs-form>
                </template>
            </template>
        <template v-if="field.type === 'chips'">
            {{ $cs.Translate(field.title) }}
            <v-combobox
                v-model="target[field._key]"
                :items="target[field._key]"
                :disabled="field.readonly"
                chips
                clearable
                solo
                multiple
                text
                @change="fieldUpdated(field)"
            >
            </v-combobox>
        </template>
        <div v-if="field.type === 'keysobject'" class="keys-object-form-field">
            <v-layout>
            {{ $cs.Translate(field.title) }}
            <v-spacer></v-spacer>
            <v-btn icon text v-if="field.canAdd" @click="addKeyObject(field)"><v-icon>add</v-icon></v-btn>
        </v-layout>
            <div >                
                <v-expansion-panels multiple :accordion="true">
                <v-expansion-panel v-for="(item,key, index) in target[field._key]" class="keys-object-form-fields" :key="key">
                    <v-expansion-panel-header class="form-title">
                            <v-layout>                                                            
                                    <template v-if="field.canEditKey">
                                            <!-- {{ target[field._key] }} -->
                                        <v-layout>
                                            <v-text-field :value="key" :label="$cs.Translate(field.title)" @change="keyObjectChange(field, key, $event)"></v-text-field>
                                            <!-- <v-btn icon text right @click="updateKey(key, field)"><v-icon>save</v-icon></v-btn> -->
                                        </v-layout>
                                    </template>
                                    <template v-else>
                                        {{ $cs.Translate(field.title) }}
                                    </template>
                                    <v-btn icon text right v-if="field.canDelete" @click="deleteKeyFromObject(key, field)"><v-icon>delete</v-icon></v-btn>
                                </v-layout>   
                    </v-expansion-panel-header>
                    <v-expansion-panel-content>                   
                        <cs-form :data="target[field._key][key]"></cs-form>
                    </v-expansion-panel-content>
                </v-expansion-panel>
            </v-expansion-panels>
            </div>            
        </div>
        <template v-if="field.type === 'object'">
            <cs-form :data="target[field._key]" :formdef.sync="field.form"></cs-form>
        </template>
        <template v-if="field.type === 'form'">
            {{ $cs.Translate(field.title) }}
                <cs-form :data="target[field._key]"></cs-form>
            </template>
    </template>
</div>
